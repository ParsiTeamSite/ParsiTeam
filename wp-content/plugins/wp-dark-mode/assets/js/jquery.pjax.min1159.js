!function(h){function t(t,n,a){var r=this;return this.on("click.pjax",t,function(t){var e=h.extend({},p(n,a));e.container||(e.container=h(this).attr("data-pjax")||r),o(t,e)})}function o(t,e,n){n=p(e,n);var a,e=t.currentTarget;if("A"!==e.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";1<t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||location.protocol!==e.protocol||location.hostname!==e.hostname||-1<e.href.indexOf("#")&&c(e)==c(location)||t.isDefaultPrevented()||(a={url:e.href,container:h(e).attr("data-pjax"),target:e},a=h.extend({},a,n),n=h.Event("pjax:click"),h(e).trigger(n,[a]),n.isDefaultPrevented()||(m(a),t.preventDefault(),h(e).trigger("pjax:clicked",[a])))}function e(t,e,n){n=p(e,n);var e=t.currentTarget,a=h(e);if("FORM"!==e.tagName.toUpperCase())throw"$.pjax.submit requires a form element";a={type:(a.attr("method")||"GET").toUpperCase(),url:a.attr("action"),container:a.attr("data-pjax"),target:e};if("GET"!==a.type&&void 0!==window.FormData)a.data=new FormData(e),a.processData=!1,a.contentType=!1;else{if(h(e).find(":file").length)return;a.data=h(e).serializeArray()}m(h.extend({},a,n)),t.preventDefault()}function m(u){"function"==typeof(u=h.extend(!0,{},h.ajaxSettings,m.defaults,u)).url&&(u.url=u.url());var n,a=u.target,l=j(u.url).hash,t=w(u.container),p=u.context=t[0],d=t[1];function f(t,e,n){(n=n||{}).relatedTarget=a;t=h.Event(t,n);return p.trigger(t,e),!t.isDefaultPrevented()}u.data||(u.data={}),Array.isArray(u.data)?u.data.push({name:"_pjax",value:d}):u.data._pjax=d,u.beforeSend=function(t,e){if("GET"!==e.type&&(e.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",d),!f("pjax:beforeSend",[t,e]))return!1;0<e.timeout&&(n=setTimeout(function(){f("pjax:timeout",[t,u])&&t.abort("timeout")},e.timeout),e.timeout=0);e=j(e.url);l&&(e.hash=l),u.requestUrl=s(e)},u.complete=function(t,e){n&&clearTimeout(n),f("pjax:complete",[t,e,u]),f("pjax:end",[t,u])},u.error=function(t,e,n){var a=b("",t,u),t=f("pjax:error",[t,e,n,u]);"GET"==u.type&&"abort"!==e&&t&&x(a.url)},u.success=function(t,e,n){var a=m.state,r="function"==typeof h.pjax.defaults.version?h.pjax.defaults.version():h.pjax.defaults.version,o=n.getResponseHeader("X-PJAX-Version"),i=b(t,n,u),s=j(i.url);if(l&&(s.hash=l,i.url=s.href),r&&o&&r!==o)x(i.url);else if(i.contents){if(m.state={id:u.id||g(),url:i.url,title:i.title,container:d,fragment:u.fragment,timeout:u.timeout},(u.push||u.replace)&&window.history.replaceState(m.state,i.title,i.url),h.contains(u.container,document.activeElement))try{document.activeElement.blur()}catch(t){}i.title&&(document.title=i.title),f("pjax:beforeReplace",[i.contents,u],{state:m.state,previousState:a}),p.html(i.contents);var c,s=p.find("input[autofocus], textarea[autofocus]").last()[0],o=(s&&document.activeElement!==s&&s.focus(),(r=i.scripts)&&(c=h("script[src]"),r.each(function(){var t,e,n=this.src;c.filter(function(){return this.src===n}).length||(t=document.createElement("script"),(e=h(this).attr("type"))&&(t.type=e),t.src=h(this).attr("src"),document.head.appendChild(t))})),u.scrollTo);l&&(a=decodeURIComponent(l.slice(1)),(s=document.getElementById(a)||document.getElementsByName(a)[0])&&(o=h(s).offset().top)),"number"==typeof o&&h(window).scrollTop(o),f("pjax:success",[t,e,n,u])}else x(i.url)},m.state||(m.state={id:g(),url:window.location.href,title:document.title,container:d,fragment:u.fragment,timeout:u.timeout},window.history.replaceState(m.state,document.title)),y(m.xhr),m.options=u;var e,r,t=m.xhr=h.ajax(u);return 0<t.readyState&&(u.push&&!u.replace&&(e=m.state.id,r=v(p,d),T[e]=r,S.push(e),A(E,0),A(S,m.defaults.maxCacheLength),window.history.pushState(null,"",u.requestUrl)),f("pjax:start",[t,u]),f("pjax:send",[t,u])),m.xhr}function n(t,e){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return m(h.extend(n,p(t,e)))}function x(t){window.history.replaceState(null,"",m.state.url),window.location.replace(t)}var u=!0,l=window.location.href,a=window.history.state;function r(t){u||y(m.xhr);var e,n=m.state,t=t.state;if(t&&t.container){if(u&&l==t.url)return;if(n){if(n.id===t.id)return;e=n.id<t.id?"forward":"back"}var a,r,o,i=T[t.id]||[],s=i[0]||t.container,c=h(s),i=i[1];c.length?(n&&(r=e,o=n.id,s=v(c,s),T[o]=s,s="forward"===r?(a=S,E):(a=E,S),a.push(o),(o=s.pop())&&delete T[o],A(a,m.defaults.maxCacheLength)),r=h.Event("pjax:popstate",{state:t,direction:e}),c.trigger(r),s={id:t.id,url:t.url,container:c,push:!1,fragment:t.fragment,timeout:t.timeout,scrollTo:!1},i?(c.trigger("pjax:start",[null,s]),(m.state=t).title&&(document.title=t.title),o=h.Event("pjax:beforeReplace",{state:t,previousState:n}),c.trigger(o,[i,s]),c.html(i),c.trigger("pjax:end",[null,s])):m(s),c[0].offsetHeight):x(location.href)}u=!1}function i(t){var e,n="function"==typeof t.url?t.url():t.url,a=t.type?t.type.toUpperCase():"GET",r=h("<form>",{method:"GET"===a?"GET":"POST",action:n,style:"display:none"}),o=("GET"!==a&&"POST"!==a&&r.append(h("<input>",{type:"hidden",name:"_method",value:a.toLowerCase()})),t.data);if("string"==typeof o)h.each(o.split("&"),function(t,e){e=e.split("=");r.append(h("<input>",{type:"hidden",name:e[0],value:e[1]}))});else if(Array.isArray(o))h.each(o,function(t,e){r.append(h("<input>",{type:"hidden",name:e.name,value:e.value}))});else if("object"==typeof o)for(e in o)r.append(h("<input>",{type:"hidden",name:e,value:o[e]}));h(document.body).append(r),r.trigger("submit")}function y(t){t&&t.readyState<4&&(t.onreadystatechange=h.noop,t.abort())}function g(){return(new Date).getTime()}function v(t,e){t=t.clone();return t.find("script").each(function(){this.src||jQuery._data(this,"globalEval",!1)}),[e,t.contents()]}function s(t){return t.search=t.search.replace(/([?&])(_pjax|_)=[^&]*/g,""),t.href.replace(/\?($|#)/,"$1")}function j(t){var e=document.createElement("a");return e.href=t,e}function c(t){return t.href.replace(/#.*/,"")}function p(t,e){return t&&e?e.container=t:e=h.isPlainObject(t)?t:{container:t},e.container&&(e.container=w(e.container)),e}function w(t){var e,n;if(Array.isArray(t)?(n=t[0],e=t[1]):n=h(e=t),n.length)return[n,e];throw"no pjax container for "+e}function d(t,e){return t.filter(e).add(t.find(e))}function f(t){return h.parseHTML(t,document,!0)}function b(t,e,n){var a,r,o={},i=/<html/i.test(t),e=e.getResponseHeader("X-PJAX-URL");return o.url=e?s(j(e)):n.requestUrl,i?(r=h(f(t.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),a=h(f(t.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]))):r=a=h(f(t)),0===a.length||(o.title=d(r,"title").last().text(),n.fragment?(e="body"===n.fragment?a:d(a,n.fragment).first()).length&&(o.contents="body"===n.fragment?e:e.contents(),o.title||(o.title=e.attr("title")||e.data("title"))):i||(o.contents=a),o.contents&&(o.contents=o.contents.not(function(){return h(this).is("title")}),o.contents.find("title").remove(),o.scripts=d(o.contents,"script[src]").remove(),o.contents=o.contents.not(o.scripts)),o.title&&(o.title=h.trim(o.title))),o}a&&a.container&&(m.state=a),"state"in window.history&&(u=!1);var T={},E=[],S=[];function A(t,e){for(;t.length>e;)delete T[t.shift()]}function P(){return h("meta").filter(function(){var t=h(this).attr("http-equiv");return t&&"X-PJAX-VERSION"===t.toUpperCase()}).attr("content")}function C(){h.fn.pjax=t,h.pjax=m,h.pjax.enable=h.noop,h.pjax.disable=D,h.pjax.click=o,h.pjax.submit=e,h.pjax.reload=n,h.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:P},h(window).on("popstate.pjax",r)}function D(){h.fn.pjax=function(){return this},h.pjax=i,h.pjax.enable=C,h.pjax.disable=h.noop,h.pjax.click=h.noop,h.pjax.submit=h.noop,h.pjax.reload=function(){window.location.reload()},h(window).off("popstate.pjax",r)}h.event.props&&h.inArray("state",h.event.props)<0?h.event.props.push("state"):"state"in h.Event.prototype||h.event.addProp("state"),h.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),(h.support.pjax?C:D)()}(jQuery);